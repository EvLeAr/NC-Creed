<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Save Our Creed!</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>

/* ===== FULL BACKGROUND IMAGE ===== */
html {
    background: url("creation.jpg") no-repeat center center fixed;
    background-size: cover;
}

/* ===== CONTENT LAYER ===== */
body {
    font-family: Arial, sans-serif;
    max-width: 1100px;
    margin: 20px auto;
    padding: 10px;
    background: linear-gradient(
        rgba(247,251,255,0.93),
        rgba(238,246,255,0.93)
    );
    transition: background-color 1s;
}

/* ===== HEADERS ===== */
h1 {
    text-align: center;
    margin: 6px 0;
}

#story {
    text-align: center;
    font-weight: bold;
    margin: 18px 0;
    line-height: 1.6;
}

#status {
    text-align: center;
    font-weight: bold;
    margin-bottom: 10px;
}

/* ===== AUDIO ===== */
#audioBox {
    margin: 20px 0;
    padding: 15px;
    border: 3px dashed #9bb7d9;
    background: #f4f9ff;
    text-align: center;
    border-radius: 12px;
}
#audioBox.unlocked {
    border-color: #2e7d32;
    background: #eaf8ee;
}
#audioHelp {
    margin-bottom: 10px;
    font-style: italic;
}
#audioControls button {
    margin: 6px;
    padding: 10px 16px;
    font-size: 1rem;
    font-weight: bold;
    border-radius: 10px;
}

/* ===== GRID ===== */
#headers {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 8px;
}
.header {
    text-align: center;
    font-weight: bold;
}

.row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 8px;
}

.english, .latin {
    padding: 12px;
    border-radius: 10px;
    font-weight: bold;
}

.english {
    background: #e8f0ff;
    border: 2px solid #b6ccff;
}

.latin {
    background: #fffdf8;
    border: 3px solid #f0d9a8;
    cursor: grab;
    touch-action: none;
}

.latin.correct {
    background: #e9f8ef;
    border-color: #2e7d32;
}

/* ===== CONTROLS ===== */
.controls button {
    width: 44px;
    height: 44px;
    font-size: 1.2rem;
    font-weight: bold;
    margin-right: 6px;
}

/* ===== FULLSCREEN COMPLETION OVERLAY ===== */
#completionOverlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(180, 215, 255, 0.95);
    z-index: 9999;
    overflow: hidden;
}

#completionContent {
    position: relative;
    top: 40%;
    transform: translateY(-40%);
    text-align: center;
}

#completionContent h2 {
    font-size: 4rem;
    color: gold;
    text-shadow: 2px 2px 6px #335;
    margin-bottom: 20px;
}

#completionContent p {
    font-size: 1.5rem;
    font-weight: bold;
}

/* ===== FIREWORKS ===== */
.firework {
    position: absolute;
    width: 8px;
    height: 8px;
    background: gold;
    border-radius: 50%;
    animation: explode 1.5s ease-out forwards;
}

@keyframes explode {
    from { transform: scale(0); opacity: 1; }
    to { transform: scale(6); opacity: 0; }
}

/* ===== FOOTER ===== */
#footer {
    margin-top: 40px;
    font-size: 0.75rem;
    color: #777;
    text-align: center;
}
#footer a {
    color: inherit;
    text-decoration: none;
    cursor: default;
}

/* ===== MOBILE ===== */
@media (max-width: 600px) {
    #headers, .row { grid-template-columns: 1fr; }
    .header { display: none; }
}
</style>
</head>

<body>

<h1 style="font-size:3rem;">Save Our Creed!</h1>
<h1 style="font-size:1.2rem;">RELI/EURO 270: Religion in Western Europe</h1>
<h1 style="font-size:1.2rem;">Dr. Evyatar Marienberg &amp; ChatGPT, 2026</h1>

<div id="story">
Heretics attacked us! We need your help!<br>
Put the following 29 lines of the Latin version<br>
of the Nicene-Constantinopolitan Creed<br>
back in order!
</div>

<div id="status">
    <div id="timer">Time: 00:00</div>
    <div id="counter">0 lines out of 29 are correct</div>
</div>

<div id="audioBox">
    <div id="audioHelp">
        This audio of the chanting of the Latin version can help,
        but it will open only after you place
        12 lines in the correct place.
    </div>
    <div id="audioStatus">üîí Audio locked</div>
    <div id="audioControls" style="display:none;">
        <button onclick="audioBack()">‚è™</button>
        <button onclick="audioPlay()">‚ñ∂</button>
        <button onclick="audioPause()">‚è∏</button>
        <button onclick="audioForward()">‚è©</button>
    </div>
</div>

<div id="headers">
    <div class="header">English</div>
    <div class="header">Latin</div>
</div>

<div id="grid"></div>

<div id="footer">
    <br><br>
    Music from the YouTube page
    <a href="https://www.youtube.com/@PetrusJosephus" target="_blank">
        Petrus Josephus
    </a>
</div>

<!-- FULLSCREEN COMPLETION -->
<div id="completionOverlay">
    <div id="completionContent">
        <h2>Done! Halleluja! Glory!</h2>
        <p id="finalTime"></p>
    </div>
</div>

<audio id="audioPlayer" src="NCCreed.mp4"></audio>

<script>
const ENGLISH = Array.from({length:29},(_,i)=>`${String(i+1).padStart(2,"0")}.`);
const LATIN_CORRECT = [...document.querySelectorAll("script")]; // placeholder replaced below
</script>

<script>
/* ==== LATIN TEXT ==== */
const LATIN = [
"(1) Credo in unum Deum,","Patrem omnipotentem,","(3) factorem caeli et terrae,",
"visibilium omnium et invisibilium,","Et in unum Dominum Iesum Christum,",
"Filium Dei unigenitum,","et ex Patre natum, ante omnia saecula,",
"(8) Deum de Deo, lumen de Lumine,","Deum verum de Deo vero,",
"genitum, non factum, consubstantialem Patri:",
"(11) per quem omnia facta sunt.","Qui propter nos homines et propter nostram salutem descendit de caelis.",
"Et incarnatus est de Spiritu Sancto","ex Maria Virgine, et homo factus est.",
"Crucifixus etiam pro nobis sub Pontio Pilato;","passus et sepultus est,",
"(17) et resurrexit tertia die, secundum Scripturas,",
"et ascendit in caelum, sedet ad dexteram Patris.",
"Et iterum venturus est cum gloria,","iudicare vivos et mortuos,",
"cuius regni non erit finis.",
"(22) Et in Spiritum Sanctum, Dominum et vivificantem:",
"qui ex Patre Filioque procedit.",
"Qui cum Patre et Filio simul adoratur et conglorificatur:",
"qui locutus est per prophetas.",
"(26) Et unam, sanctam, catholicam et apostolicam Ecclesiam.",
"Confiteor unum baptisma in remissionem peccatorum.",
"Et exspecto resurrectionem mortuorum,",
"(29) et vitam venturi saeculi. Amen."
];

let latin = LATIN.map((t,i)=>({text:t, correct:i}));
latin.sort(()=>Math.random()-0.5);

let timerStarted=false,startTime,completed=false,audioUnlocked=false;

function startTimer(){
    if(timerStarted) return;
    timerStarted=true; startTime=Date.now();
    setInterval(()=>{
        const s=Math.floor((Date.now()-startTime)/1000);
        timer.textContent=`Time: ${Math.floor(s/60).toString().padStart(2,"0")}:${(s%60).toString().padStart(2,"0")}`;
    },1000);
}

function render(){
    grid.innerHTML="";
    latin.forEach((l,i)=>{
        const row=document.createElement("div"); row.className="row";
        const e=document.createElement("div"); e.className="english"; e.textContent=i+1;
        const d=document.createElement("div"); d.className="latin"+(l.correct===i?" correct":"");
        d.textContent=l.text;
        const up=document.createElement("button"); up.textContent="‚Üë"; up.onclick=()=>swap(i,i-1);
        const down=document.createElement("button"); down.textContent="‚Üì"; down.onclick=()=>swap(i,i+1);
        const c=document.createElement("div"); c.className="controls"; c.append(up,down);
        d.prepend(c);
        row.append(e,d); grid.append(row);
    });
}

function swap(i,j){
    startTimer();
    if(j<0||j>=latin.length) return;
    [latin[i],latin[j]]=[latin[j],latin[i]];
    render(); check();
}

function check(){
    const ok=latin.filter((l,i)=>l.correct===i).length;
    counter.textContent=`${ok} lines out of 29 are correct`;
    if(ok>=12&&!audioUnlocked){
        audioUnlocked=true;
        audioControls.style.display="block";
        audioStatus.textContent="üîì Audio unlocked";
        audioBox.classList.add("unlocked");
    }
    if(ok===29&&!completed){
        completed=true;
        showCompletion();
    }
}

function showCompletion(){
    completionOverlay.style.display="block";
    const s=Math.floor((Date.now()-startTime)/1000);
    finalTime.textContent=`Completed in ${Math.floor(s/60)} minutes and ${s%60} seconds`;
    for(let i=0;i<30;i++) spawnFirework();
    setTimeout(()=>location.reload(),10000);
}

function spawnFirework(){
    const f=document.createElement("div");
    f.className="firework";
    f.style.left=Math.random()*100+"%";
    f.style.top=Math.random()*100+"%";
    completionOverlay.appendChild(f);
    setTimeout(()=>f.remove(),1500);
}

/* AUDIO */
function audioPlay(){audioPlayer.play();}
function audioPause(){audioPlayer.pause();}
function audioBack(){audioPlayer.currentTime=Math.max(0,audioPlayer.currentTime-10);}
function audioForward(){audioPlayer.currentTime+=10;}

render(); check();
</script>

</body>
</html>
